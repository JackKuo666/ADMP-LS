# 日志系统配置说明

## 概述

本应用现在集成了完整的日志记录系统，用于监控用户行为、MCP服务调用、系统状态和错误信息。

## 日志文件类型

### 1. 用户行为日志 (`user_actions.log`)
记录用户的各种操作：
- 创建/删除对话
- 发送消息
- 导入/导出对话历史
- 其他用户交互

### 2. MCP服务日志 (`mcp_services.log`)
记录MCP相关的操作：
- MCP服务器连接/断开
- 工具调用和响应
- MCP错误信息

### 3. 系统状态日志 (`system_status.log`)
记录系统运行状态：
- 应用启动/关闭
- 长时间运行任务
- 系统状态变化

### 4. 错误日志 (`errors.log`)
记录所有错误信息：
- 连接错误
- 工具执行错误
- 系统异常

## 长时间运行任务监控

### 心跳机制
- 每5分钟发送一次心跳信号
- 记录任务执行时间
- 监控任务状态

### 监控的任务类型
- MCP工具调用
- 大型响应生成
- 文件处理任务

## 日志查看

### 界面查看
- 在应用界面中可以查看实时日志
- 支持按时间范围过滤
- 支持关键词搜索

### 文件位置
所有日志文件保存在 `logs/` 目录下

## 配置选项

### 日志级别
- INFO: 一般信息
- ERROR: 错误信息

### 日志轮转
- 建议定期清理旧日志文件
- 避免日志文件过大影响性能

## 使用建议

1. **定期检查错误日志**：及时发现和解决问题
2. **监控长时间运行任务**：确保系统正常运行
3. **分析用户行为**：了解用户使用模式
4. **性能监控**：通过日志分析系统性能

## 注意事项

1. 日志文件会持续增长，需要定期清理
2. 敏感信息会被自动脱敏处理
3. 大型响应会被截断显示
4. 日志记录不会影响应用性能 